kyopa@kyopa-VirtualBox:~/franklin/kernel$ cd ..
kyopa@kyopa-VirtualBox:~/franklin$ make kernel 
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
kyopa@kyopa-VirtualBox:~/franklin$ make run
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.1g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1081 sectors
Written to medium : 1081 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e3.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x215a00.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -smp 2 -M q35 -m 2G -cdrom barebones.iso -boot d
kyopa@kyopa-VirtualBox:~/franklin$ cat /proc/sys/vm/max_map_count 
65530
kyopa@kyopa-VirtualBox:~/franklin$ make kernel 
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
cc  -O0 -g -Wall -Wextra -Wpedantic -Wconversion -pipe -I ../include  -std=c11 -ffreestanding -fno-stack-protector -fno-stack-check -fno-lto -fno-pie -fno-pic -m64 -march=x86-64 -mabi=sysv -mno-80387 -mno-mmx -mno-sse -mno-sse2 -mno-red-zone -mcmodel=kernel -MMD  -c ../kernel/pmm.c -o ../kernel/pmm.o
In file included from ../kernel/pmm.c:1:
../include/d.h:3:1: warning: ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / pmm.c : 2 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / pmm.c : In function ‘palloc’:../ kernel /
    pmm.c : 12 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 12 |
  panic("panic: palloc, size too big");
|
  ^~~~~../ kernel /
    pmm.c : 48 : 11
  : warning
  : returning ‘long unsigned int’ from a function with return type ‘void*’ makes
      pointer from integer without a cast[-Wint - conversion] 48 |
  return ((uint64_t)(page* PGSIZE));
|          ~^~~~~~~~~~~~~~~~~~~~~~~~~~
../kernel/pmm.c: In function ‘pallocaddr’:
../kernel/pmm.c:55:18: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   55 |   uint32_t pfn = paddr / PGSIZE;
|                  ^~~~~
../kernel/pmm.c:64:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘void *’ makes pointer from integer without a cast [-Wint-conversion]
   64 |   return paddr;
|          ^~~~~
../kernel/pmm.c: In function ‘freepg’:
../kernel/pmm.c:70:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   70 |   uint32_t page = addr / PGSIZE;
|                   ^~~~
../kernel/pmm.c: In function ‘initbmap’:
../kernel/pmm.c:89:37: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   89 |     togglepage(entry->base / PGSIZE + i);
|                ~~~~~~~~~~~~~~~~~~~~~^~~
../kernel/pmm.c: In function ‘setentry’:
../kernel/pmm.c:102:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  102 |   uint32_t page = entry->base / PGSIZE;
| ^~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / vmm.c -
        o../ kernel / vmm.o In file included from../ kernel / vmm.c : 1 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / vmm.c : 3 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ kernel / vmm.c : 5 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
|
  ^../ kernel / vmm.c : In function ‘init_vmm’:../ kernel /
    vmm.c : 29 : 3
  : warning
  : implicit declaration of
      function ‘memzero’ [-Wimplicit - function - declaration] 29 |
  memzero((uint8_t*)PML4E, PGSIZE);
|
  ^~~~~~~../ kernel / vmm.c : In function ‘unmappage’:../ kernel /
    vmm.c : 60 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 60 |
  panic("unmappage: pte not present");
|     ^~~~~
../kernel/vmm.c:61:8: warning: unsigned conversion from ‘int’ to ‘pte_t’ {aka ‘long unsigned int’} changes value from ‘-2’ to ‘18446744073709551614’ [-Wsign-conversion]
   61 |   *pte &= ~(PRESENT);
|        ^~
../kernel/vmm.c: In function ‘remappage’:
../kernel/vmm.c:70:15: warning: conversion to ‘uint32_t’ {aka ‘unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   70 |   if (!isfree(pfn))
      |               ^~~
../kernel/vmm.c:76:39: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   76 |   *pte |= (uint64_t)pallocaddr(1, pfn * PGSIZE);
../ kernel / vmm.c : In function ‘getpte’:../ kernel /
    vmm.c : 83 : 20
  : warning
  : conversion from ‘uint64_t’ { aka ‘long unsigned int’} to ‘uint16_t’ {
    aka ‘short unsigned int’
  } may change value[-Wconversion] 83 |
  uint16_t index = vaddr >> 39;
|                    ^~~~~
../kernel/vmm.c: In function ‘test’:
../kernel/vmm.c:148:15: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
  148 |     mappage(i * PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 151 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 151 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 161 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 161 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 165 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 165 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 169 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 169 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 173 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 173 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel / vmm.c : In function ‘mappage’:../ kernel /
    vmm.c : 37 : 9
  : warning
  : ‘PDPTE’ is used uninitialized in this function[-Wuninitialized] 37 |
  Table tablearr[4] = {
  | ^~~~~~~~../ kernel /
        vmm
          .c : 37 : 9 :
        warning : ‘PDE’ is used uninitialized in this function[-Wuninitialized]
          ../
        kernel /
        vmm.c : 37 : 9 : warning : ‘PTE’ is used uninitialized
          in this function[-Wuninitialized] cc -
      O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe - I../ include -
      std =
    c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
    lto - fno - pie - fno - pic - m64 - march =
      x86 - 64 - mabi =
        sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
        zone - mcmodel =
          kernel - MMD - c../ kernel / proc.c -
            o../ kernel / proc.o In file included from../ kernel /
              proc.c : 1 :../ include / franklin /
              proc.h : 9 : 6 : warning :
                ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
          enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 5 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / cpu.c -
        o../ kernel / cpu.o In file included from../ kernel / cpu.c : 3 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / cpu.c : 7 :../ include / franklin / fs /
    vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~In file included from../ kernel / cpu.c : 9 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ include / asm / x86.h : 4,
  from../ kernel / cpu.c : 13 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^../ kernel / cpu.c : In function ‘cpu’:../ kernel /
    cpu.c : 53 : 3 : warning : implicit declaration of function ‘init_proc’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 53 | init_proc(1);
| ^~~~~~~~~ |
  init_lock../ kernel /
    cpu.c : 34 : 29
  : warning : unused parameter ‘info’ [-Wunused - parameter] 34 |
  cpu(struct limine_smp_info* info) |
  ~~~~~~~~~~~~~~~~~~~~~~~~^~~~cc - O0 - g - Wall - Wextra - Wpedantic
    - Wconversion - pipe - I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno
  - lto - fno - pie - fno - pic - m64
  - march = x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno
                              - sse2 - mno - red - zone - mcmodel =
                                kernel - MMD
                                - c../ kernel / kernel.c -
                                o../ kernel
                                  / kernel.o In file included from../ include /
                                  asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include
      / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 9 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 81 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 81 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 86 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 86 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 87 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 87 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 89 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 89 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 90 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 90 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 113 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 113 : 16
  : warning : statement with no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 120 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 121 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 121 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 124 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 126 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 126 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 130 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 130 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 84 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 84 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 143 |
  r();
|
  ^../ kernel /
    kernel.c : 144 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 155 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 155 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 155 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 144 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / slab.c -
        o../ kernel / slab.o In file included from../ kernel / slab.c : 41 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / slab.c : 44 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / slab.c : In function ‘kfree’:../ kernel /
    slab.c : 153 : 7
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 153 |
  panic("kfree, double free");
| ^~~~~../ kernel / slab.c : At top level :../ kernel /
    slab.c : 166 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 166 |
}
;
|  ^
../kernel/slab.c: In function ‘kalloclarge’:
../kernel/slab.c:174:36: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  174 |   if ((metadata = palloc(pagecount + 1)) == NULL)
      |                          ~~~~~~~~~~^~~
../kernel/slab.c:177:12: warning: assignment to ‘struct large_alloc_metadata *’ from ‘uint64_t’ {aka ‘long unsigned int’} makes pointer from integer without a cast [-Wint-conversion]
  177 |   metadata = P2V((uintptr_t)metadata);
|
  ^../ kernel / slab.c : In function ‘kfreelarge’:../ kernel /
    slab.c : 187 : 12
  : warning
  : assignment to ‘struct large_alloc_metadata*’ from incompatible pointer
      type ‘char*’ [-Wincompatible - pointer - types] 187 |
  metadata = (char*)ptr - PGSIZE;
|            ^
../kernel/slab.c:189:44: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  189 |   freepg(V2P((uintptr_t)metadata), metadata->pagecount);
|
  ~~~~~~~~^~~~~~~~~~~../ kernel / slab.c : In function ‘newslab’:../ kernel /
    slab.c : 199 : 10
  : warning : unused variable ‘i’ [-Wunused - variable] 199 |
  size_t i = 1;
| ^../ kernel / slab.c : At top level :../ kernel /
    slab.c : 239 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 239 |
}
;
|
  ^../ kernel / slab.c : In function ‘test_slab’:../ kernel /
    slab.c : 299 : 9
  : warning : unused variable ‘ff’ [-Wunused - variable] 299 |
  char* ff = palloc(1);
|
  ^~../ kernel /
    slab.c : 298 : 9 : warning : unused variable ‘f’ [-Wunused - variable] 298 |
  char* f = palloc(1);
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make run make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std =
    c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
    lto - fno - pie - fno - pic - m64 - march =
      x86 - 64 - mabi =
        sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
        zone - mcmodel =
          kernel - MMD - c../ kernel / pmm.c -
          o../ kernel / pmm.o In file included from../ kernel / pmm.c : 1 :../
            include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / pmm.c : 2 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / pmm.c : In function ‘palloc’:../ kernel /
    pmm.c : 12 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 12 |
  panic("panic: palloc, size too big");
|
  ^~~~~../ kernel /
    pmm.c : 48 : 11
  : warning
  : returning ‘long unsigned int’ from a function with return type ‘void*’ makes
      pointer from integer without a cast[-Wint - conversion] 48 |
  return ((uint64_t)(page* PGSIZE));
|          ~^~~~~~~~~~~~~~~~~~~~~~~~~~
../kernel/pmm.c: In function ‘pallocaddr’:
../kernel/pmm.c:55:18: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   55 |   uint32_t pfn = paddr / PGSIZE;
|                  ^~~~~
../kernel/pmm.c:64:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘void *’ makes pointer from integer without a cast [-Wint-conversion]
   64 |   return paddr;
|          ^~~~~
../kernel/pmm.c: In function ‘freepg’:
../kernel/pmm.c:70:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   70 |   uint32_t page = addr / PGSIZE;
|                   ^~~~
../kernel/pmm.c: In function ‘initbmap’:
../kernel/pmm.c:89:37: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   89 |     togglepage(entry->base / PGSIZE + i);
|                ~~~~~~~~~~~~~~~~~~~~~^~~
../kernel/pmm.c: In function ‘setentry’:
../kernel/pmm.c:102:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  102 |   uint32_t page = entry->base / PGSIZE;
| ^~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / vmm.c -
        o../ kernel / vmm.o In file included from../ kernel / vmm.c : 1 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / vmm.c : 3 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ kernel / vmm.c : 5 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
|
  ^../ kernel / vmm.c : In function ‘init_vmm’:../ kernel /
    vmm.c : 29 : 3
  : warning
  : implicit declaration of
      function ‘memzero’ [-Wimplicit - function - declaration] 29 |
  memzero((uint8_t*)PML4E, PGSIZE);
|
  ^~~~~~~../ kernel / vmm.c : In function ‘unmappage’:../ kernel /
    vmm.c : 60 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 60 |
  panic("unmappage: pte not present");
|     ^~~~~
../kernel/vmm.c:61:8: warning: unsigned conversion from ‘int’ to ‘pte_t’ {aka ‘long unsigned int’} changes value from ‘-2’ to ‘18446744073709551614’ [-Wsign-conversion]
   61 |   *pte &= ~(PRESENT);
|        ^~
../kernel/vmm.c: In function ‘remappage’:
../kernel/vmm.c:70:15: warning: conversion to ‘uint32_t’ {aka ‘unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   70 |   if (!isfree(pfn))
      |               ^~~
../kernel/vmm.c:76:39: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   76 |   *pte |= (uint64_t)pallocaddr(1, pfn * PGSIZE);
../ kernel / vmm.c : In function ‘getpte’:../ kernel /
    vmm.c : 83 : 20
  : warning
  : conversion from ‘uint64_t’ { aka ‘long unsigned int’} to ‘uint16_t’ {
    aka ‘short unsigned int’
  } may change value[-Wconversion] 83 |
  uint16_t index = vaddr >> 39;
|                    ^~~~~
../kernel/vmm.c: In function ‘test’:
../kernel/vmm.c:148:15: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
  148 |     mappage(i * PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 151 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 151 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 161 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 161 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 165 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 165 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 169 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 169 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 173 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 173 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel / vmm.c : In function ‘mappage’:../ kernel /
    vmm.c : 37 : 9
  : warning
  : ‘PDPTE’ is used uninitialized in this function[-Wuninitialized] 37 |
  Table tablearr[4] = {
  | ^~~~~~~~../ kernel /
        vmm
          .c : 37 : 9 :
        warning : ‘PDE’ is used uninitialized in this function[-Wuninitialized]
          ../
        kernel /
        vmm.c : 37 : 9 : warning : ‘PTE’ is used uninitialized
          in this function[-Wuninitialized] cc -
      O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe - I../ include -
      std =
    c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
    lto - fno - pie - fno - pic - m64 - march =
      x86 - 64 - mabi =
        sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
        zone - mcmodel =
          kernel - MMD - c../ kernel / proc.c -
            o../ kernel / proc.o In file included from../ kernel /
              proc.c : 1 :../ include / franklin /
              proc.h : 9 : 6 : warning :
                ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
          enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 5 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / cpu.c -
        o../ kernel / cpu.o In file included from../ kernel / cpu.c : 3 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / cpu.c : 7 :../ include / franklin / fs /
    vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~In file included from../ kernel / cpu.c : 9 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ include / asm / x86.h : 4,
  from../ kernel / cpu.c : 13 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^../ kernel / cpu.c : In function ‘cpu’:../ kernel /
    cpu.c : 53 : 3 : warning : implicit declaration of function ‘init_proc’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 53 | init_proc(1);
| ^~~~~~~~~ |
  init_lock../ kernel /
    cpu.c : 34 : 29
  : warning : unused parameter ‘info’ [-Wunused - parameter] 34 |
  cpu(struct limine_smp_info* info) |
  ~~~~~~~~~~~~~~~~~~~~~~~~^~~~cc - O0 - g - Wall - Wextra - Wpedantic
    - Wconversion - pipe - I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno
  - lto - fno - pie - fno - pic - m64
  - march = x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno
                              - sse2 - mno - red - zone - mcmodel =
                                kernel - MMD
                                - c../ kernel / kernel.c -
                                o../ kernel
                                  / kernel.o In file included from../ include /
                                  asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include
      / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 9 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 81 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 81 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 86 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 86 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 87 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 87 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 89 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 89 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 90 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 90 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 113 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 113 : 16
  : warning : statement with no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 120 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 121 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 121 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 124 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 126 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 126 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 130 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 130 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 84 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 84 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 143 |
  r();
|
  ^../ kernel /
    kernel.c : 144 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 155 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 155 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 155 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 144 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / slab.c -
        o../ kernel / slab.o In file included from../ kernel / slab.c : 41 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / slab.c : 44 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / slab.c : In function ‘kfree’:../ kernel /
    slab.c : 153 : 7
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 153 |
  panic("kfree, double free");
| ^~~~~../ kernel / slab.c : At top level :../ kernel /
    slab.c : 166 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 166 |
}
;
|  ^
../kernel/slab.c: In function ‘kalloclarge’:
../kernel/slab.c:174:36: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  174 |   if ((metadata = palloc(pagecount + 1)) == NULL)
      |                          ~~~~~~~~~~^~~
../kernel/slab.c:177:12: warning: assignment to ‘struct large_alloc_metadata *’ from ‘uint64_t’ {aka ‘long unsigned int’} makes pointer from integer without a cast [-Wint-conversion]
  177 |   metadata = P2V((uintptr_t)metadata);
|
  ^../ kernel / slab.c : In function ‘kfreelarge’:../ kernel /
    slab.c : 187 : 12
  : warning
  : assignment to ‘struct large_alloc_metadata*’ from incompatible pointer
      type ‘char*’ [-Wincompatible - pointer - types] 187 |
  metadata = (char*)ptr - PGSIZE;
|            ^
../kernel/slab.c:189:44: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  189 |   freepg(V2P((uintptr_t)metadata), metadata->pagecount);
|
  ~~~~~~~~^~~~~~~~~~~../ kernel / slab.c : In function ‘newslab’:../ kernel /
    slab.c : 199 : 10
  : warning : unused variable ‘i’ [-Wunused - variable] 199 |
  size_t i = 1;
| ^../ kernel / slab.c : At top level :../ kernel /
    slab.c : 239 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 239 |
}
;
|
  ^../ kernel / slab.c : In function ‘test_slab’:../ kernel /
    slab.c : 299 : 9
  : warning : unused variable ‘ff’ [-Wunused - variable] 299 |
  char* ff = palloc(1);
|
  ^~../ kernel /
    slab.c : 298 : 9 : warning : unused variable ‘f’ [-Wunused - variable] 298 |
  char* f = palloc(1);
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1] : Leaving directory '/home/kyopa/franklin/kernel' rm -
  rf iso_root mkdir -
  p iso_root cp f.tar iso_root cp kernel / kernel.elf limine.cfg limine /
    limine.sys limine / limine -
  cd.bin limine / limine - cd - efi.bin iso_root / xorriso - as mkisofs -
  b limine - cd.bin - no - emul - boot - boot - load - size 4 - boot - info -
  table-- efi - boot limine - cd - efi.bin - efi - boot - part-- efi - boot -
  image-- protective - msdos - label iso_root -
  o barebones.iso xorriso 1.5.2 : RockRidge filesystem manipulator
  , libburnia project.

    Drive current : -outdev 'stdio:barebones.iso' Media current : stdio file
  , overwriteable Media status
  : is blank Media summary : 0 sessions
  , 0 data blocks
  , 0 data
  , 42.2g free Added to ISO image
  : directory '/' =
      '/home/kyopa/franklin/iso_root' xorriso
  : UPDATE : 6 files added in 1 seconds xorriso
  : UPDATE : 6 files added in 1 seconds ISO image
      produced : 1081 sectors Written to medium : 1081 sectors at
        LBA 0 Writing to 'stdio:barebones.iso' completed successfully.

    limine / limine -
          deploy barebones.iso Physical block size of 512 bytes.Deploying to
            GPT.Logical block size of 512 bytes
              .Secondary header at LBA 0x10e3. Secondary header
                valid.GPT partition NOT specified.Attempting GPT
                  embedding.New maximum count of partition
                    entries : 32. Stage 2 to be located at 0x1400 and
        0x215a00. Reminder
  : Remember to copy the limine.sys file in either the root or
      / boot directories of one of the partitions on the device
  , or boot will fail !Limine deployed successfully !rm - rf iso_root qemu -
         system - x86_64 - smp 2 - M q35 - m 2G - cdrom barebones.iso -
         boot d kyopa @kyopa - VirtualBox : ~ / franklin$ make kernel make -
         C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std =
      c11 - ffreestanding - fno - stack - protector - fno - stack - check -
      fno - lto - fno - pie - fno - pic - m64 - march =
        x86 - 64 - mabi =
          sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
          zone - mcmodel =
            kernel - MMD - c../ kernel / pmm.c -
            o../ kernel / pmm.o In file included from../ kernel / pmm.c : 1 :../
              include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / pmm.c : 2 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / pmm.c : In function ‘palloc’:../ kernel /
    pmm.c : 12 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 12 |
  panic("panic: palloc, size too big");
|
  ^~~~~../ kernel /
    pmm.c : 48 : 11
  : warning
  : returning ‘long unsigned int’ from a function with return type ‘void*’ makes
      pointer from integer without a cast[-Wint - conversion] 48 |
  return ((uint64_t)(page* PGSIZE));
|          ~^~~~~~~~~~~~~~~~~~~~~~~~~~
../kernel/pmm.c: In function ‘pallocaddr’:
../kernel/pmm.c:55:18: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   55 |   uint32_t pfn = paddr / PGSIZE;
|                  ^~~~~
../kernel/pmm.c:64:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘void *’ makes pointer from integer without a cast [-Wint-conversion]
   64 |   return paddr;
|          ^~~~~
../kernel/pmm.c: In function ‘freepg’:
../kernel/pmm.c:70:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   70 |   uint32_t page = addr / PGSIZE;
|                   ^~~~
../kernel/pmm.c: In function ‘initbmap’:
../kernel/pmm.c:89:37: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
   89 |     togglepage(entry->base / PGSIZE + i);
|                ~~~~~~~~~~~~~~~~~~~~~^~~
../kernel/pmm.c: In function ‘setentry’:
../kernel/pmm.c:102:19: warning: conversion from ‘uint64_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  102 |   uint32_t page = entry->base / PGSIZE;
| ^~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / vmm.c -
        o../ kernel / vmm.o In file included from../ kernel / vmm.c : 1 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / vmm.c : 3 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ kernel / vmm.c : 5 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
|
  ^../ kernel / vmm.c : In function ‘init_vmm’:../ kernel /
    vmm.c : 29 : 3
  : warning
  : implicit declaration of
      function ‘memzero’ [-Wimplicit - function - declaration] 29 |
  memzero((uint8_t*)PML4E, PGSIZE);
|
  ^~~~~~~../ kernel / vmm.c : In function ‘unmappage’:../ kernel /
    vmm.c : 60 : 5
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 60 |
  panic("unmappage: pte not present");
|     ^~~~~
../kernel/vmm.c:61:8: warning: unsigned conversion from ‘int’ to ‘pte_t’ {aka ‘long unsigned int’} changes value from ‘-2’ to ‘18446744073709551614’ [-Wsign-conversion]
   61 |   *pte &= ~(PRESENT);
|        ^~
../kernel/vmm.c: In function ‘remappage’:
../kernel/vmm.c:70:15: warning: conversion to ‘uint32_t’ {aka ‘unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   70 |   if (!isfree(pfn))
      |               ^~~
../kernel/vmm.c:76:39: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
   76 |   *pte |= (uint64_t)pallocaddr(1, pfn * PGSIZE);
../ kernel / vmm.c : In function ‘getpte’:../ kernel /
    vmm.c : 83 : 20
  : warning
  : conversion from ‘uint64_t’ { aka ‘long unsigned int’} to ‘uint16_t’ {
    aka ‘short unsigned int’
  } may change value[-Wconversion] 83 |
  uint16_t index = vaddr >> 39;
|                    ^~~~~
../kernel/vmm.c: In function ‘test’:
../kernel/vmm.c:148:15: warning: conversion to ‘uint64_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
  148 |     mappage(i * PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 151 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 151 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 161 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 161 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 165 : 17
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 165 |
  unmappage(i* PGSIZE);
../ kernel /
    vmm.c : 169 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 169 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel /
    vmm.c : 173 : 15
  : warning
  : conversion to ‘uint64_t’ { aka ‘long unsigned int’} from ‘int’ may change
      the sign of the result[-Wsign - conversion] 173 |
  mappage(i* PGSIZE, 0, KFLAGS);
../ kernel / vmm.c : In function ‘mappage’:../ kernel /
    vmm.c : 37 : 9
  : warning
  : ‘PDPTE’ is used uninitialized in this function[-Wuninitialized] 37 |
  Table tablearr[4] = {
  | ^~~~~~~~../ kernel /
        vmm
          .c : 37 : 9 :
        warning : ‘PDE’ is used uninitialized in this function[-Wuninitialized]
          ../
        kernel /
        vmm.c : 37 : 9 : warning : ‘PTE’ is used uninitialized
          in this function[-Wuninitialized] cc -
      O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe - I../ include -
      std =
    c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
    lto - fno - pie - fno - pic - m64 - march =
      x86 - 64 - mabi =
        sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
        zone - mcmodel =
          kernel - MMD - c../ kernel / proc.c -
            o../ kernel / proc.o In file included from../ kernel /
              proc.c : 1 :../ include / franklin /
              proc.h : 9 : 6 : warning :
                ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
          enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 5 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / cpu.c -
        o../ kernel / cpu.o In file included from../ kernel / cpu.c : 3 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / cpu.c : 7 :../ include / franklin / fs /
    vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~In file included from../ kernel / cpu.c : 9 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
| ^In file included from../ include / asm / x86.h : 4,
  from../ kernel / cpu.c : 13 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^../ kernel / cpu.c : In function ‘cpu’:../ kernel /
    cpu.c : 53 : 3 : warning : implicit declaration of function ‘init_proc’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 53 | init_proc(1);
| ^~~~~~~~~ |
  init_lock../ kernel /
    cpu.c : 34 : 29
  : warning : unused parameter ‘info’ [-Wunused - parameter] 34 |
  cpu(struct limine_smp_info* info) |
  ~~~~~~~~~~~~~~~~~~~~~~~~^~~~cc - O0 - g - Wall - Wextra - Wpedantic
    - Wconversion - pipe - I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno
  - lto - fno - pie - fno - pic - m64
  - march = x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno
                              - sse2 - mno - red - zone - mcmodel =
                                kernel - MMD
                                - c../ kernel / kernel.c -
                                o../ kernel
                                  / kernel.o In file included from../ include /
                                  asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include
      / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 9 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 81 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 81 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 86 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 86 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 87 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 87 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 89 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 89 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 90 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 90 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 113 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 113 : 16
  : warning : statement with no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 120 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 121 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 121 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 124 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 126 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 126 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 130 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 130 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 84 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 84 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 143 |
  r();
|
  ^../ kernel /
    kernel.c : 144 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 155 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 155 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 155 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 144 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel =
        kernel - MMD - c../ kernel / slab.c -
        o../ kernel / slab.o In file included from../ kernel / slab.c : 41 :../
          include / d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / slab.c : 44 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / slab.c : In function ‘kfree’:../ kernel /
    slab.c : 153 : 7
  : warning
  : implicit declaration of
      function ‘panic’ [-Wimplicit - function - declaration] 153 |
  panic("kfree, double free");
| ^~~~~../ kernel / slab.c : At top level :../ kernel /
    slab.c : 166 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 166 |
}
;
|  ^
../kernel/slab.c: In function ‘kalloclarge’:
../kernel/slab.c:174:36: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  174 |   if ((metadata = palloc(pagecount + 1)) == NULL)
      |                          ~~~~~~~~~~^~~
../kernel/slab.c:177:12: warning: assignment to ‘struct large_alloc_metadata *’ from ‘uint64_t’ {aka ‘long unsigned int’} makes pointer from integer without a cast [-Wint-conversion]
  177 |   metadata = P2V((uintptr_t)metadata);
|
  ^../ kernel / slab.c : In function ‘kfreelarge’:../ kernel /
    slab.c : 187 : 12
  : warning
  : assignment to ‘struct large_alloc_metadata*’ from incompatible pointer
      type ‘char*’ [-Wincompatible - pointer - types] 187 |
  metadata = (char*)ptr - PGSIZE;
|            ^
../kernel/slab.c:189:44: warning: conversion from ‘size_t’ {aka ‘long unsigned int’} to ‘uint32_t’ {aka ‘unsigned int’} may change value [-Wconversion]
  189 |   freepg(V2P((uintptr_t)metadata), metadata->pagecount);
|
  ~~~~~~~~^~~~~~~~~~~../ kernel / slab.c : In function ‘newslab’:../ kernel /
    slab.c : 199 : 10
  : warning : unused variable ‘i’ [-Wunused - variable] 199 |
  size_t i = 1;
| ^../ kernel / slab.c : At top level :../ kernel /
    slab.c : 239 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 239 |
}
;
|
  ^../ kernel / slab.c : In function ‘test_slab’:../ kernel /
    slab.c : 299 : 9
  : warning : unused variable ‘ff’ [-Wunused - variable] 299 |
  char* ff = palloc(1);
|
  ^~../ kernel /
    slab.c : 298 : 9 : warning : unused variable ‘f’ [-Wunused - variable] 298 |
  char* f = palloc(1);
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi =
              sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno -
              red - zone - mcmodel =
                kernel - MMD - c../ kernel / proc.c -
                  o../ kernel / proc.o In file included from../ kernel /
                    proc.c : 1 :../ include / franklin /
                    proc.h : 9 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
                enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 5 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel = kernel - MMD - c../ kernel / kernel.c -
                       o../ kernel / kernel.o In file included from../ include /
                         asm / x86.h : 4,
                   from../ kernel / kernel.c : 4 :../ include /
                     d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 9 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 9 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 19 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 19 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 81 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 81 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 86 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 86 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 87 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 87 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 89 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 89 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 90 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 90 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 113 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 113 : 16
  : warning : statement with no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 120 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 121 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 121 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 124 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 126 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 126 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 130 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 130 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 84 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 84 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 143 |
  r();
|
  ^../ kernel /
    kernel.c : 144 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 155 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 155 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 155 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 144 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel = kernel - MMD - c../ kernel / kernel.c -
                       o../ kernel / kernel.o In file included from../ include /
                         asm / x86.h : 4,
                   from../ kernel / kernel.c : 4 :../ include /
                     d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 81 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 81 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 86 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 86 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 87 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 87 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 89 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 89 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 90 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 90 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 113 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 113 : 16
  : warning : statement with no effect[-Wunused - value] 113 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 110 : 19 : note : in definition of macro ‘_shit_’ 110 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 120 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 121 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 121 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 124 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 126 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 126 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 130 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 130 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 84 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 84 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 143 |
  r();
|
  ^../ kernel /
    kernel.c : 144 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 155 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 155 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 155 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 144 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 144 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 88 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 88 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 93 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 93 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 94 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 94 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 96 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 96 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 97 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 97 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 120 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 120 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 117 : 19 : note : in definition of macro ‘_shit_’ 117 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 120 : 16
  : warning : statement with no effect[-Wunused - value] 120 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 117 : 19 : note : in definition of macro ‘_shit_’ 117 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 127 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 127 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 128 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 128 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 131 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 131 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 133 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 133 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 137 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 137 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 91 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 91 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 150 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 150 |
  r();
|
  ^../ kernel /
    kernel.c : 151 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 151 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 162 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 162 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 162 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 151 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 151 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 67 : 8 : error : parameter name omitted 67 |
  int ll(struct l)
{
  | ^~~~~~~~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 69 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 69 |
};
|
  ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 77 : 3 : error : too few arguments to function ‘ll’ 77 |
  ll();
| ^~../ kernel / kernel.c : 67 : 5 : note : declared here 67 | int ll(struct l)
{
  | ^~../ kernel /
      kernel.c : 94 : 3
    : warning : implicit declaration of function ‘init_plock’;
  did you mean ‘init_lock’
    ? [-Wimplicit - function - declaration] 94 | init_plock();
  | ^~~~~~~~~~ |
    init_lock../ kernel /
      kernel.c : 99 : 3
    : warning
    : implicit declaration of
        function ‘test_slab’ [-Wimplicit - function - declaration] 99 |
    test_slab();
  | ^~~~~~~~~../ kernel /
      kernel.c : 100 : 3
    : warning : implicit declaration of function ‘init_rootfs’;
  did you mean ‘init_tss’
    ? [-Wimplicit - function - declaration] 100 | init_rootfs();
  | ^~~~~~~~~~~ |
    init_tss../ kernel /
      kernel.c : 102 : 3
    : warning
    : implicit declaration of
        function ‘vfs_mount’ [-Wimplicit - function - declaration] 102 |
    vfs_mount(0, "ramfs");
  |
    ^~~~~~~~~../ kernel /
      kernel.c : 103 : 3
    : warning
    : implicit declaration of
        function ‘init_rootvn’ [-Wimplicit - function - declaration] 103 |
    init_rootvn();
  |
    ^~~~~~~~~~~../ kernel / kernel.c : 126 : 16 : warning : left -
      hand operand of comma expression has no effect[-Wunused - value] 126 |
    _shit_(("lol", "lol"));
  |
    ^../ kernel /
      kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
    #define _shit_(x) x |
    ^../ kernel /
      kernel.c : 126 : 16
    : warning : statement with no effect[-Wunused - value] 126 |
    _shit_(("lol", "lol"));
  |
    ~~~~~~^~~~~~~~../ kernel /
      kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
    #define _shit_(x) x |
    ^../ kernel /
      kernel.c : 133 : 3
    : warning
    : implicit declaration of
        function ‘ramfs_t’ [-Wimplicit - function - declaration] 133 |
    ramfs_t();
  |
    ^~~~~~~../ kernel /
      kernel.c : 134 : 3
    : warning
    : implicit declaration of
        function ‘initramfs’ [-Wimplicit - function - declaration] 134 |
    initramfs();
  |
    ^~~~~~~~~../ kernel /
      kernel.c : 137 : 3
    : warning
    : implicit declaration of
        function ‘vfs_open’ [-Wimplicit - function - declaration] 137 |
    vfs_open("/main.c", &v, 0, 0);
  |
    ^~~~~~~~../ kernel /
      kernel.c : 139 : 3
    : warning
    : implicit declaration of
        function ‘vfs_read’ [-Wimplicit - function - declaration] 139 |
    vfs_read(v, buf, 0, 100);
  |
    ^~~~~~~~../ kernel /
      kernel.c : 143 : 3
    : warning
    : implicit declaration of
        function ‘exec’ [-Wimplicit - function - declaration] 143 |
    exec("/exe");
  |
    ^~~~../ kernel /
      kernel.c : 97 : 7
    : warning : unused variable ‘x’ [-Wunused - variable] 97 |
    int x = sizeof(a) / sizeof(a[0]);
  |
    ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
      kernel.c : 156 : 3
    : warning
    : implicit declaration of
        function ‘r’ [-Wimplicit - function - declaration] 156 |
    r();
  |
    ^../ kernel /
      kernel.c : 157 : 14
    : warning : unused variable ‘h’ [-Wunused - variable] 157 |
    static int h;
  |
    ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
      kernel.c : 168 : 14
    : warning : unused variable ‘x’ [-Wunused - variable] 168 |
    static int x;
  |
    ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
        kernel.c : 69 : 1 : warning : control reaches end of non -
      void function[-Wreturn - type] 69 |
};
|
  ^At top level :../ kernel /
    kernel.c : 168 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 168 |
  static int x;
|
  ^../ kernel /
    kernel.c : 157 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 157 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~make[1]
  : ***[GNUmakefile:120:../ kernel / kernel.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make kernel make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 67 : 8 : maerror : parameter name omitted 67 |
  int ll(struct l)
{
  | ^~~~~~~~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 69 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 69 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 94 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 94 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 99 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 99 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 100 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 100 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 102 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 102 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 103 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 126 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 126 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 126 : 16
  : warning : statement with no effect[-Wunused - value] 126 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 133 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 133 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 134 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 137 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 137 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 139 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 139 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 143 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 97 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 97 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 156 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 156 |
  r();
|
  ^../ kernel /
    kernel.c : 157 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 157 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 168 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 168 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 69 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 69 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 168 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 168 |
  static int x;
|
  ^../ kernel /
    kernel.c : 157 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 157 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~make[1]
  : ***[GNUmakefile:120:../ kernel / kernel.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make kernel make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 67 : 8 : error : parameter name omitted 67 |
  int ll(struct l)
{
  | ^~~~~~~~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 69 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 69 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 94 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 94 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 99 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 99 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 100 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 100 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 102 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 102 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 103 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 126 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 126 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 126 : 16
  : warning : statement with no effect[-Wunused - value] 126 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 123 : 19 : note : in definition of macro ‘_shit_’ 123 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 133 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 133 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 134 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 137 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 137 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 139 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 139 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 143 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 143 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 97 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 97 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 156 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 156 |
  r();
|
  ^../ kernel /
    kernel.c : 157 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 157 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 168 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 168 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 69 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 69 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 168 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 168 |
  static int x;
|
  ^../ kernel /
    kernel.c : 157 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 157 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~make[1]
  : ***[GNUmakefile:120:../ kernel / kernel.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make kernel make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 95 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 95 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 100 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 100 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 101 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 101 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 103 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 104 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 104 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 127 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 127 : 16
  : warning : statement with no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 134 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 135 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 135 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 138 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 138 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 140 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 140 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 144 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 144 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 98 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 98 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 157 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 157 |
  r();
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 169 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 169 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 96 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 96 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 101 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 101 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 102 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 102 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 104 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 104 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 105 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 105 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 128 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 128 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 125 : 19 : note : in definition of macro ‘_shit_’ 125 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 128 : 16
  : warning : statement with no effect[-Wunused - value] 128 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 125 : 19 : note : in definition of macro ‘_shit_’ 125 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 135 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 135 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 136 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 136 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 139 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 139 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 141 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 145 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 145 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 99 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 99 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 158 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 158 |
  r();
|
  ^../ kernel /
    kernel.c : 159 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 159 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 170 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 170 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 170 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 170 |
  static int x;
|
  ^../ kernel /
    kernel.c : 159 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 159 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 93 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 93 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 98 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 98 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 99 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 99 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 101 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 101 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 102 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 102 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 125 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 125 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 122 : 19 : note : in definition of macro ‘_shit_’ 122 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 125 : 16
  : warning : statement with no effect[-Wunused - value] 125 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 122 : 19 : note : in definition of macro ‘_shit_’ 122 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 132 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 132 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 133 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 133 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 136 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 136 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 138 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 138 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 142 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 142 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 96 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 96 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 155 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 155 |
  r();
|
  ^../ kernel /
    kernel.c : 156 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 156 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 167 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 167 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 167 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 167 |
  static int x;
|
  ^../ kernel /
    kernel.c : 156 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 156 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 78 : 6 : error : expected expression before ‘
{
  ’ token 78 | ll({ .x = 1 });
  | ^../ kernel /
      kernel.c : 95 : 3
    : warning : implicit declaration of function ‘init_plock’;
  did you mean ‘init_lock’
    ? [-Wimplicit - function - declaration] 95 | init_plock();
  | ^~~~~~~~~~ |
    init_lock../ kernel /
      kernel.c : 100 : 3
    : warning
    : implicit declaration of
        function ‘test_slab’ [-Wimplicit - function - declaration] 100 |
    test_slab();
  | ^~~~~~~~~../ kernel /
      kernel.c : 101 : 3
    : warning : implicit declaration of function ‘init_rootfs’;
  did you mean ‘init_tss’
    ? [-Wimplicit - function - declaration] 101 | init_rootfs();
  | ^~~~~~~~~~~ |
    init_tss../ kernel /
      kernel.c : 103 : 3
    : warning
    : implicit declaration of
        function ‘vfs_mount’ [-Wimplicit - function - declaration] 103 |
    vfs_mount(0, "ramfs");
  |
    ^~~~~~~~~../ kernel /
      kernel.c : 104 : 3
    : warning
    : implicit declaration of
        function ‘init_rootvn’ [-Wimplicit - function - declaration] 104 |
    init_rootvn();
  |
    ^~~~~~~~~~~../ kernel / kernel.c : 127 : 16 : warning : left -
      hand operand of comma expression has no effect[-Wunused - value] 127 |
    _shit_(("lol", "lol"));
  |
    ^../ kernel /
      kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
    #define _shit_(x) x |
    ^../ kernel /
      kernel.c : 127 : 16
    : warning : statement with no effect[-Wunused - value] 127 |
    _shit_(("lol", "lol"));
  |
    ~~~~~~^~~~~~~~../ kernel /
      kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
    #define _shit_(x) x |
    ^../ kernel /
      kernel.c : 134 : 3
    : warning
    : implicit declaration of
        function ‘ramfs_t’ [-Wimplicit - function - declaration] 134 |
    ramfs_t();
  |
    ^~~~~~~../ kernel /
      kernel.c : 135 : 3
    : warning
    : implicit declaration of
        function ‘initramfs’ [-Wimplicit - function - declaration] 135 |
    initramfs();
  |
    ^~~~~~~~~../ kernel /
      kernel.c : 138 : 3
    : warning
    : implicit declaration of
        function ‘vfs_open’ [-Wimplicit - function - declaration] 138 |
    vfs_open("/main.c", &v, 0, 0);
  |
    ^~~~~~~~../ kernel /
      kernel.c : 140 : 3
    : warning
    : implicit declaration of
        function ‘vfs_read’ [-Wimplicit - function - declaration] 140 |
    vfs_read(v, buf, 0, 100);
  |
    ^~~~~~~~../ kernel /
      kernel.c : 144 : 3
    : warning
    : implicit declaration of
        function ‘exec’ [-Wimplicit - function - declaration] 144 |
    exec("/exe");
  |
    ^~~~../ kernel /
      kernel.c : 98 : 7
    : warning : unused variable ‘x’ [-Wunused - variable] 98 |
    int x = sizeof(a) / sizeof(a[0]);
  |
    ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
      kernel.c : 157 : 3
    : warning
    : implicit declaration of
        function ‘r’ [-Wimplicit - function - declaration] 157 |
    r();
  |
    ^../ kernel /
      kernel.c : 158 : 14
    : warning : unused variable ‘h’ [-Wunused - variable] 158 |
    static int h;
  |
    ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
      kernel.c : 169 : 14
    : warning : unused variable ‘x’ [-Wunused - variable] 169 |
    static int x;
  |
    ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
        kernel.c : 70 : 1 : warning : control reaches end of non -
      void function[-Wreturn - type] 70 |
};
|
  ^At top level :../ kernel /
    kernel.c : 169 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~make[1]
  : ***[GNUmakefile:120:../ kernel / kernel.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make kernel make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 95 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 95 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 100 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 100 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 101 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 101 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 103 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 104 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 104 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 127 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 127 : 16
  : warning : statement with no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 134 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 135 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 135 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 138 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 138 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 140 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 140 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 144 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 144 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 98 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 98 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 157 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 157 |
  r();
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 169 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 169 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 95 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 95 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 100 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 100 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 101 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 101 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 103 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 104 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 104 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 127 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 127 : 16
  : warning : statement with no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 134 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 135 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 135 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 138 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 138 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 140 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 140 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 144 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 144 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 98 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 98 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 157 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 157 |
  r();
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 169 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 169 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel /
    kernel.c : 65 : 14
  : warning : initializer element is not constant[-Wpedantic] 65 |
  struct l l = (struct l){
  .x = 10
};
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
    kernel.c : 68 : 13
  : warning : unused parameter ‘ll’ [-Wunused - parameter] 68 |
  ll(struct l ll)
{
  | ~~~~~~~~~^~../ kernel / kernel.c : At top level :../ kernel /
      kernel.c : 70 : 2 : warning : ISO C does not allow extra ‘;
  ’ outside of a function[-Wpedantic] 70 |
};
| ^../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 95 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 95 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 100 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 100 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 101 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 101 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 103 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 103 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 104 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 104 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 127 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 127 : 16
  : warning : statement with no effect[-Wunused - value] 127 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 124 : 19 : note : in definition of macro ‘_shit_’ 124 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 134 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 134 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 135 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 135 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 138 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 138 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 140 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 140 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 144 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 144 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 98 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 98 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 157 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 157 |
  r();
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 169 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel / kernel.c : In function ‘ll’:../ kernel /
      kernel.c : 70 : 1 : warning : control reaches end of non -
    void function[-Wreturn - type] 70 |
}
;
|
  ^At top level :../ kernel /
    kernel.c : 169 : 14
  : warning : ‘x’ defined but not used[-Wunused - variable] 169 |
  static int x;
|
  ^../ kernel /
    kernel.c : 158 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 158 |
  static int h;
|
  ^../ kernel /
    kernel.c : 58 : 17
  : warning : ‘ar’ defined but not used[-Wunused - variable] 58 |
  static uint64_t ar[3] = {
  3,
  3,
  4
};
| ^~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 79 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 79 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 84 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 84 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 85 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 85 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 87 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 87 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 88 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 88 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 111 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 111 : 16
  : warning : statement with no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 118 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 118 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 119 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 119 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 122 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 122 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 124 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 128 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 128 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 82 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 82 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 141 |
  r();
|
  ^../ kernel /
    kernel.c : 142 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 142 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 153 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 153 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 153 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 142 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 142 |
  static int h;
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel = kernel - MMD - c../ kernel / kernel.c -
                       o../ kernel / kernel.o In file included from../ include /
                         asm / x86.h : 4,
                   from../ kernel / kernel.c : 4 :../ include /
                     d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 79 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 79 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 84 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 84 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 85 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 85 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 87 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 87 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 88 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 88 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 111 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 111 : 16
  : warning : statement with no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 118 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 118 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 119 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 119 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 122 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 122 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 124 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 128 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 128 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 82 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 82 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 141 |
  r();
|
  ^../ kernel /
    kernel.c : 142 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 142 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 153 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 153 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 153 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 142 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 142 |
  static int h;
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~cc - O0 - g - Wall - Wextra - Wpedantic - Wconversion - pipe -
    I../ include - std =
  c11 - ffreestanding - fno - stack - protector - fno - stack - check - fno -
  lto - fno - pie - fno - pic - m64 - march =
    x86 - 64 - mabi =
      sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 - mno - red -
      zone - mcmodel = kernel - MMD - c../ kernel / kernel.c -
                       o../ kernel / kernel.o In file included from../ include /
                         asm / x86.h : 4,
                   from../ kernel / kernel.c : 4 :../ include /
                     d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 79 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 79 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 84 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 84 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 85 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 85 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 87 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 87 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 88 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 88 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 111 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 111 : 16
  : warning : statement with no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 118 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 118 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 119 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 119 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 122 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 122 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 124 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 128 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 128 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 82 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 82 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 141 |
  r();
|
  ^../ kernel /
    kernel.c : 142 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 142 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 153 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 153 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 153 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 142 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 142 |
  static int h;
| ^ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../ kernel /
      time.o../ kernel / apic.o../ kernel / string.o../ kernel / gdt.o../
      kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../ kernel /
      pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../ kernel /
      pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel / slab.o../
      main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs /
      ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 67 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 67 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 68 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 68 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:68:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:66:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   66 |   size_t count;
| ^~~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 97 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 97 | return 0;
|            ^
../kernel/proc.c:86:1: note: declared here
   86 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:105:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  105 |   a = stack;
|     ^
../kernel/proc.c:120:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  120 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 102 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 102 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../
      kernel / time.o../ kernel / apic.o../ kernel / string.o../ kernel /
      gdt.o../ kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../
      kernel / pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../
      kernel / pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel /
      slab.o../ main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../
      fs / ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make kernel make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 68 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 69 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:67:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   67 |   size_t count;
|
  ^~~~~../ kernel /
    proc.c : 65 : 14
  : warning : unused variable ‘phdr’ [-Wunused - variable] 65 |
  Elf64_Phdr phdr;
| ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 98 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 98 | return 0;
|            ^
../kernel/proc.c:87:1: note: declared here
   87 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:106:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  106 |   a = stack;
|     ^
../kernel/proc.c:121:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  121 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 103 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 103 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel / panic.o../
      kernel / time.o../ kernel / apic.o../ kernel / string.o../ kernel /
      gdt.o../ kernel / interrupt.o../ kernel / kbd.o../ kernel / io.o../
      kernel / pmm.o../ kernel / idt.o../ kernel / vmm.o../ kernel / proc.o../
      kernel / pic.o../ kernel / cpu.o../ kernel / kernel.o../ kernel /
      slab.o../ main.o../ fs / ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../
      fs / ramfs / initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
    Map kernel.map - nostdlib - static - z max - page - size =
  0x1000 - T linker.ld -
  o kernel.elf make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' kyopa @kyopa -
  VirtualBox : ~ / franklin$ make gdb make -
  C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 68 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 69 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:13: makerror: invalid type argument of ‘->’ (have ‘Elf64_Ehdr’ {aka ‘struct <anonymous>’})
   71 |   phdr = elf->e_phoff;
|
  ^~../ kernel /
    proc.c : 67 : 10
  : warning
  : variable ‘count’ set but not used[-Wunused - but - set - variable] 67 |
  size_t count;
|
  ^~~~~../ kernel /
    proc.c : 65 : 15
  : warning
  : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
  Elf64_Phdr* phdr;
| ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 100 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 100 | return 0;
|            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
|     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 105 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
| ^~~~~~~make[1]
  : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make kernel make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / proc.c -
                                o../ kernel / proc.o In file included from../
                                  include / franklin / proc.h : 4
  , from../ kernel / proc.c : 1 :../ include / franklin /
      mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 68 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 69 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
  count = vfs_read(vn, &elf, 0, 4);
|           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:67:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   67 |   size_t count;
|
  ^~~~~../ kernel /
    proc.c : 65 : 15
  : warning
  : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
  Elf64_Phdr* phdr;
| ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 100 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 100 | return 0;
|            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
|     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 105 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
      |                     ^~~~~~~
ld ../kernel/acpi.o ../kernel/spinlock.o ../kernel/panic.o ../kernel/time.o ../kernel/apic.o ../kernel/string.o ../kernel/gdt.o ../kernel/interrupt.o ../kernel/kbd.o ../kernel/io.o ../kernel/pmm.o ../kernel/idt.o ../kernel/vmm.o ../kernel/proc.o ../kernel/pic.o ../kernel/cpu.o ../kernel/kernel.o ../kernel/slab.o ../main.o ../fs/ramfs/ramfs_subr.o ../fs/ramfs/ramfs.o ../fs/ramfs/initramfs.o ../fs/vfs.o  ./switch.o ./isr.o -Map kernel.map -nostdlib -static -z max-page-size=0x1000 -T linker.ld -o kernel.elf
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
cc  -O0 -g -Wall -Wextra -Wpedantic -Wconversion -pipe -I ../include  -std=c11 -ffreestanding -fno-stack-protector -fno-stack-check -fno-lto -fno-pie -fno-pic -m64 -march=x86-64 -mabi=sysv -mno-80387 -mno-mmx -mno-sse -mno-sse2 -mno-red-zone -mcmodel=kernel -MMD  -c ../kernel/proc.c -o ../kernel/proc.o
In file included from ../include/franklin/proc.h:4,
                 from ../kernel/proc.c:1:
../include/franklin/mmu.h:71:2: warning: ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:3: error: cannot convert to a pointer type
   71 |   phdr = (char*)elf + (Elf64_Phdr*)elf.e_phoff;
      |
        ^~~~../ kernel / proc.c : 71 : 21 : error : invalid operands to binary +
          (have ‘char*’ and ‘Elf64_Phdr*’ { aka ‘struct<anonymous> *’})71 |
        phdr = (char*)elf + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | |
        char* Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:3: error: cannot convert to a pointer type
   71 |   phdr = (char*)elf + (Elf64_Phdr*)elf.e_phoff;
      |
        ^~~~../ kernel / proc.c : 71 : 21 : error : invalid operands to binary +
          (have ‘char*’ and ‘Elf64_Phdr*’ { aka ‘struct<anonymous> *’})71 |
        phdr = (char*)elf + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | |
        char* Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:22: error: invalid operands to binary + (have ‘char *’ and ‘Elf64_Phdr *’ {aka ‘struct <anonymous> *’})
   71 |   phdr = (char*)&elf + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | |
        char* Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:14: error: invalid operands to binary + (have ‘Elf64_Ehdr’ {aka ‘struct <anonymous>’} and ‘Elf64_Phdr *’ {aka ‘struct <anonymous> *’})
   71 |   phdr = elf + (Elf64_Phdr*)elf.e_phoff;
      | ^~~~~~~~~~~~~~~~~~~~~~~~~ | | |
        Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:15: error: invalid operands to binary + (have ‘Elf64_Ehdr *’ {aka ‘struct <anonymous> *’} and ‘Elf64_Phdr *’ {aka ‘struct <anonymous> *’})
   71 |   phdr = &elf + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | | |
        Elf64_Phdr* {
          aka struct<anonymous> *
        } |
        Elf64_Ehdr* { aka struct<anonymous> * }../ kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:67:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   67 |   size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~ld../ kernel / acpi.o../ kernel / spinlock.o../ kernel /
            panic.o../ kernel / time.o../ kernel / apic.o../ kernel /
            string.o../ kernel / gdt.o../ kernel / interrupt.o../ kernel /
            kbd.o../ kernel / io.o../ kernel / pmm.o../ kernel / idt.o../
            kernel / vmm.o../ kernel / proc.o../ kernel / pic.o../ kernel /
            cpu.o../ kernel / kernel.o../ kernel / slab.o../ main.o../ fs /
            ramfs / ramfs_subr.o../ fs / ramfs / ramfs.o../ fs / ramfs /
            initramfs.o../ fs / vfs.o./ switch.o./ isr.o -
          Map kernel.map - nostdlib - static - z max - page - size =
        0x1000 - T linker.ld -
        o kernel.elf make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' rm -
        rf iso_root mkdir -
        p iso_root cp f.tar iso_root cp kernel / kernel.elf limine.cfg limine /
          limine.sys limine / limine -
        cd.bin limine / limine - cd - efi.bin iso_root / xorriso - as mkisofs -
        b limine - cd.bin - no - emul - boot - boot - load - size 4 - boot -
        info - table-- efi - boot limine - cd - efi.bin - efi - boot -
        part-- efi - boot - image-- protective - msdos - label iso_root -
        o barebones.iso xorriso 1.5.2 : RockRidge filesystem manipulator
        , libburnia project.

          Drive current
        : -outdev 'stdio:barebones.iso' Media current : stdio file
        , overwriteable Media status
        : is blank Media summary : 0 sessions
        , 0 data blocks
        , 0 data
        , 42.2g free Added to ISO image
        : directory '/' =
            '/home/kyopa/franklin/iso_root' xorriso
        : UPDATE : 6 files added in 1 seconds xorriso
        : UPDATE : 6 files added in 1 seconds ISO image
            produced : 1082 sectors Written to medium : 1082 sectors at
              LBA 0 Writing to 'stdio:barebones.iso' completed successfully.

          limine / limine -
                deploy barebones.iso Physical block size
                  of 512 bytes.Deploying to GPT.Logical block size of 512 bytes
                    .Secondary header at LBA 0x10e7. Secondary header
                      valid.GPT partition NOT specified.Attempting GPT
                        embedding.New maximum count of partition
                          entries : 32. Stage 2 to be located at 0x1400 and
              0x216200. Reminder
        : Remember to copy the limine.sys file in either the root or
            / boot directories of one of the partitions on the device
        , or boot will fail !Limine deployed successfully !rm -
               rf iso_root qemu - system - x86_64 - s - S - M q35 - m 2G -
               cdrom barebones.iso - boot d kyopa @kyopa -
               VirtualBox : ~ / franklin$ make gdb make -
               C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin / mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:22: error: invalid operands to binary + (have ‘char *’ and ‘Elf64_Phdr *’ {aka ‘struct <anonymous> *’})
   71 |   phdr = (char*)&elf + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | |
        char* Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:71:24: error: invalid operands to binary + (have ‘char *’ and ‘Elf64_Phdr *’ {aka ‘struct <anonymous> *’})
   71 |   phdr = ((char*)&elf) + (Elf64_Phdr*)elf.e_phoff;
      | ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~ | | | |
        char* Elf64_Phdr* {
          aka struct<anonymous> *
        }
            ../
          kernel /
          proc.c : 67 : 10
        : warning
        : variable ‘count’ set
            but not used[-Wunused - but - set - variable] 67 |
        size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      | ^~~~~~~make[1]
        : ***[GNUmakefile:120:../ kernel / proc.o] Error 1 make[1]
        : Leaving directory '/home/kyopa/franklin/kernel' make
        : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / proc.c -
                      o../ kernel / proc.o In file included from../ include /
                        franklin / proc.h : 4
        , from../ kernel / proc.c : 1 :../ include / franklin /
            mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
        from../ kernel / proc.c : 2 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / proc.c : 3 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      |
        ^../ kernel / proc.c : In function ‘acq’:../ kernel /
          proc.c : 34 : 3
        : warning
        : implicit declaration of
            function ‘acquire’ [-Wimplicit - function - declaration] 34 |
        acquire(&ptable.lock);
      |
        ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
          proc.c : 40 : 3
        : warning
        : implicit declaration of
            function ‘release’ [-Wimplicit - function - declaration] 40 |
        release(&ptable.lock);
      |   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
      |
        ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
          proc.c : 68 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
        vfs_open(name, &vn, 0, 0);
      |
        ^~~~~~~~../ kernel /
          proc.c : 69 : 11
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
        count = vfs_read(vn, &elf, 0, 4);
      |           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:67:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   67 |   size_t count;
      |
        ^~~~~../ kernel /
          proc.c : 65 : 15
        : warning
        : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
        Elf64_Phdr* phdr;
      | ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
          proc.c : 100 : 12 : warning : ‘return’ with a value
        , in function returning void[-Wreturn - type] 100 | return 0;
      |            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
      |     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
      |
        ^../ kernel /
          proc.c : 105 : 12
        : warning
        : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
        uint64_t a;
      |
        ^At top level :../ kernel /
          proc.c : 10 : 21
        : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
        static struct proc* curproc;
      |                     ^~~~~~~
ld ../kernel/acpi.o ../kernel/spinlock.o ../kernel/panic.o ../kernel/time.o ../kernel/apic.o ../kernel/string.o ../kernel/gdt.o ../kernel/interrupt.o ../kernel/kbd.o ../kernel/io.o ../kernel/pmm.o ../kernel/idt.o ../kernel/vmm.o ../kernel/proc.o ../kernel/pic.o ../kernel/cpu.o ../kernel/kernel.o ../kernel/slab.o ../main.o ../fs/ramfs/ramfs_subr.o ../fs/ramfs/ramfs.o ../fs/ramfs/initramfs.o ../fs/vfs.o  ./switch.o ./isr.o -Map kernel.map -nostdlib -static -z max-page-size=0x1000 -T linker.ld -o kernel.elf
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ s
s: command not found
kyopa@kyopa-VirtualBox:~/franklin$ ls
ACPI           exe    GNUmakefile  include     limine      ll.d    main.c~  nice      p
barebones.iso  fs     g.tar        kernel      limine.cfg  ll.o    main.d   o.tar     README.md
debug.log      f.tar  haha         LICENSE.md  link        main.c  main.o   ovmf-x64  tar.o
kyopa@kyopa-VirtualBox:~/franklin$ gcc -static -nostdlib -fno-pie -o exe main.c
/usr/bin/ld: warning: cannot find entry symbol _start;
      defaulting to 0000000000401000 kyopa @kyopa -
          VirtualBox : ~ / franklin$ gcc - static - nostdlib - fno - pie -
          e main - o exe main.c kyopa @kyopa -
          VirtualBox : ~ / franklin$ objdump - d -
          Mintel exe

            exe
        : file format elf64 -
          x86 -
          64

          Disassembly of section.text :

          0000000000401000 <
        main > : 401000
        : f3 0f 1e fa endbr64 401004 : 55 push rbp 401005 : 48 89 e5 mov rbp
        , rsp 401008
        : c7 45 fc 0a 00 00 00 mov DWORD PTR[rbp - 0x4]
        , 0xa 40100f : 8b 45 fc mov eax
        , DWORD PTR[rbp - 0x4] 401012 : 83 c0 45 add eax
        , 0x45 401015 : 89 45 f8 mov DWORD PTR[rbp - 0x8]
        , eax 401018
        : b8 00 00 00 00 mov eax
        , 0x0 40101d : 5d pop rbp 40101e
        : c3 ret kyopa @kyopa -
          VirtualBox : ~ / franklin$ make gdb make -
          C kernel make[1]
        : Entering directory '/home/kyopa/franklin/kernel' cc -
          O0 -
          g -
          Wall -
          Wextra -
          Wpedantic -
          Wconversion -
          pipe -
          I../ include -
          std = c11 - ffreestanding - fno - stack - protector - fno - stack -
                check - fno - lto - fno - pie - fno - pic - m64 - march =
                  x86 - 64 - mabi =
                    sysv - mno - 80387 - mno - mmx - mno - sse - mno - sse2 -
                    mno - red - zone - mcmodel =
                      kernel - MMD - c../ kernel / kernel.c -
                      o../ kernel / kernel.o In file included from../ include /
                        asm / x86.h : 4
        , from../ kernel / kernel.c : 4 :../ include /
            d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / kernel.c : 5 :../ include /
          d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 3 | ;
      | ^In file included from../ kernel / kernel.c : 8 :../ include / std /
          string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 8 | ;
      | ^In file included from../ kernel / kernel.c : 17 :../ include /
          franklin / mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 71 |
      }
      ;
      |
        ^In file included from../ kernel / kernel.c : 19 :../ include /
          franklin /
          proc.h : 10 : 6
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
        enum procstate;
      |
        ^~~~~~~~~../ include / franklin /
          proc.h : 20 : 14
        : warning
        : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
        getproc(enum procstate, uint8_t*);
      | ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
          franklin / fs /
          vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 14 | ;
      | ^../ include / franklin / fs /
          vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
      ’ outside of a function[-Wpedantic] 19 | ;
      |
        ^../ include / franklin / fs /
          vfs.h : 85 : 15
        : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
        static inline vref(struct vnode* vn) |
        ^~~~../ include / franklin / fs /
          vfs.h : 92 : 15
        : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
        static inline vref_locked(struct vnode* vn) |
        ^~~~~~~~~~~../ include / franklin / fs /
          vfs.h : 97 : 15
        : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
        static inline vput(struct vnode* vn) |
        ^~~~../ include / franklin / fs /
          vfs.h : 102 : 15
        : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
        static inline vrele(struct vnode* vn) |
        ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
          kernel.c : 79 : 3
        : warning : implicit declaration of function ‘init_plock’;
      did you mean ‘init_lock’
        ? [-Wimplicit - function - declaration] 79 | init_plock();
      | ^~~~~~~~~~ |
        init_lock../ kernel /
          kernel.c : 84 : 3
        : warning
        : implicit declaration of
            function ‘test_slab’ [-Wimplicit - function - declaration] 84 |
        test_slab();
      | ^~~~~~~~~../ kernel /
          kernel.c : 85 : 3
        : warning : implicit declaration of function ‘init_rootfs’;
      did you mean ‘init_tss’
        ? [-Wimplicit - function - declaration] 85 | init_rootfs();
      | ^~~~~~~~~~~ |
        init_tss../ kernel /
          kernel.c : 87 : 3
        : warning
        : implicit declaration of
            function ‘vfs_mount’ [-Wimplicit - function - declaration] 87 |
        vfs_mount(0, "ramfs");
      |
        ^~~~~~~~~../ kernel /
          kernel.c : 88 : 3
        : warning
        : implicit declaration of
            function ‘init_rootvn’ [-Wimplicit - function - declaration] 88 |
        init_rootvn();
      |
        ^~~~~~~~~~~../ kernel / kernel.c : 111 : 16 : warning : left -
          hand operand of comma expression has no effect[-Wunused - value] 111 |
        _shit_(("lol", "lol"));
      |
        ^../ kernel /
          kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
        #define _shit_(x) x |
        ^../ kernel /
          kernel.c : 111 : 16
        : warning : statement with no effect[-Wunused - value] 111 |
        _shit_(("lol", "lol"));
      |
        ~~~~~~^~~~~~~~../ kernel /
          kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
        #define _shit_(x) x |
        ^../ kernel /
          kernel.c : 118 : 3
        : warning
        : implicit declaration of
          function ‘ramfs_t’ [-Wimplicit - function - declaration] 118 |
        ramfs_t();
      |
        ^~~~~~~../ kernel /
          kernel.c : 119 : 3
        : warning
        : implicit declaration of
            function ‘initramfs’ [-Wimplicit - function - declaration] 119 |
        initramfs();
      |
        ^~~~~~~~~../ kernel /
          kernel.c : 122 : 3
        : warning
        : implicit declaration of
            function ‘vfs_open’ [-Wimplicit - function - declaration] 122 |
        vfs_open("/main.c", &v, 0, 0);
      |
        ^~~~~~~~../ kernel /
          kernel.c : 124 : 3
        : warning
        : implicit declaration of
            function ‘vfs_read’ [-Wimplicit - function - declaration] 124 |
        vfs_read(v, buf, 0, 100);
      |   ^~~~~~~~
../kernel/kernel.c:128:3: error: ‘exec’ undeclared (first use in this function)
  128 |   exec"/exe");
      |   ^~~~
../kernel/kernel.c:128:3: note: each undeclared identifier is reported only once for each function it appears in
../kernel/kernel.c:128:7: error: expected ‘;’ before string constant
  128 |   exec"/exe");
      | ^~~~~~ | ;
../kernel/kernel.c:128:13: error: expected statement before ‘)’ token
  128 |   exec"/exe");
|
  ^../ kernel /
    kernel.c : 82 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 82 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 141 |
  r();
|
  ^../ kernel /
    kernel.c : 142 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 142 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 153 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 153 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 153 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 142 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 142 |
  static int h;
| ^make[1]
  : ***[GNUmakefile:120:../ kernel / kernel.o] Error 1 make[1]
  : Leaving directory '/home/kyopa/franklin/kernel' make
  : ***[GNUmakefile:42:kernel] Error 2 kyopa @kyopa -
    VirtualBox : ~ / franklin$ make gdb make -
    C kernel make[1]
  : Entering directory '/home/kyopa/franklin/kernel' cc -
    O0 -
    g -
    Wall -
    Wextra -
    Wpedantic -
    Wconversion -
    pipe -
    I../ include -
    std = c11 - ffreestanding - fno - stack - protector - fno - stack - check -
          fno - lto - fno - pie - fno - pic - m64 - march =
            x86 - 64 - mabi = sysv - mno - 80387 - mno - mmx - mno - sse - mno -
                              sse2 - mno - red - zone - mcmodel =
                                kernel - MMD - c../ kernel / kernel.c -
                                o../ kernel / kernel.o In file included from../
                                  include / asm / x86.h : 4
  , from../ kernel / kernel.c : 4 :../ include /
      d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 5 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / kernel.c : 8 :../ include / std /
    string.h : 8 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 8 | ;
| ^In file included from../ kernel / kernel.c : 17 :../ include / franklin /
    mmu.h : 71 : 2 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / kernel.c : 19 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ kernel / kernel.c : 26 :../ include /
    franklin / fs / vfs.h : 14 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 14 | ;
| ^../ include / franklin / fs /
    vfs.h : 19 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 19 | ;
|
  ^../ include / franklin / fs /
    vfs.h : 85 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 85 |
  static inline vref(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 92 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 92 |
  static inline vref_locked(struct vnode* vn) |
  ^~~~~~~~~~~../ include / franklin / fs /
    vfs.h : 97 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 97 |
  static inline vput(struct vnode* vn) |
  ^~~~../ include / franklin / fs /
    vfs.h : 102 : 15
  : warning : return type defaults to ‘int’ [-Wimplicit - int] 102 |
  static inline vrele(struct vnode* vn) |
  ^~~~~../ kernel / kernel.c : In function ‘kmain’:../ kernel /
    kernel.c : 79 : 3 : warning : implicit declaration of function ‘init_plock’;
did you mean ‘init_lock’
  ? [-Wimplicit - function - declaration] 79 | init_plock();
| ^~~~~~~~~~ |
  init_lock../ kernel /
    kernel.c : 84 : 3
  : warning
  : implicit declaration of
      function ‘test_slab’ [-Wimplicit - function - declaration] 84 |
  test_slab();
| ^~~~~~~~~../ kernel /
    kernel.c : 85 : 3
  : warning : implicit declaration of function ‘init_rootfs’;
did you mean ‘init_tss’
  ? [-Wimplicit - function - declaration] 85 | init_rootfs();
| ^~~~~~~~~~~ |
  init_tss../ kernel /
    kernel.c : 87 : 3
  : warning
  : implicit declaration of
      function ‘vfs_mount’ [-Wimplicit - function - declaration] 87 |
  vfs_mount(0, "ramfs");
|
  ^~~~~~~~~../ kernel /
    kernel.c : 88 : 3
  : warning
  : implicit declaration of
      function ‘init_rootvn’ [-Wimplicit - function - declaration] 88 |
  init_rootvn();
|
  ^~~~~~~~~~~../ kernel / kernel.c : 111 : 16 : warning : left -
    hand operand of comma expression has no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ^../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 111 : 16
  : warning : statement with no effect[-Wunused - value] 111 |
  _shit_(("lol", "lol"));
|
  ~~~~~~^~~~~~~~../ kernel /
    kernel.c : 108 : 19 : note : in definition of macro ‘_shit_’ 108 |
  #define _shit_(x) x |
  ^../ kernel /
    kernel.c : 118 : 3
  : warning
  : implicit declaration of
    function ‘ramfs_t’ [-Wimplicit - function - declaration] 118 |
  ramfs_t();
|
  ^~~~~~~../ kernel /
    kernel.c : 119 : 3
  : warning
  : implicit declaration of
      function ‘initramfs’ [-Wimplicit - function - declaration] 119 |
  initramfs();
|
  ^~~~~~~~~../ kernel /
    kernel.c : 122 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 122 |
  vfs_open("/main.c", &v, 0, 0);
|
  ^~~~~~~~../ kernel /
    kernel.c : 124 : 3
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 124 |
  vfs_read(v, buf, 0, 100);
|
  ^~~~~~~~../ kernel /
    kernel.c : 128 : 3
  : warning
  : implicit declaration of
      function ‘exec’ [-Wimplicit - function - declaration] 128 |
  exec("/exe");
|
  ^~~~../ kernel /
    kernel.c : 82 : 7 : warning : unused variable ‘x’ [-Wunused - variable] 82 |
  int x = sizeof(a) / sizeof(a[0]);
|
  ^../ kernel / kernel.c : In function ‘thread3’:../ kernel /
    kernel.c : 141 : 3
  : warning
  : implicit declaration of
      function ‘r’ [-Wimplicit - function - declaration] 141 |
  r();
|
  ^../ kernel /
    kernel.c : 142 : 14
  : warning : unused variable ‘h’ [-Wunused - variable] 142 |
  static int h;
|
  ^../ kernel / kernel.c : In function ‘thread2’:../ kernel /
    kernel.c : 153 : 14
  : warning : unused variable ‘x’ [-Wunused - variable] 153 |
  static int x;
|
  ^At top level :../ kernel /
    kernel
      .c : 153 : 14
  : warning
  : ‘x’ defined but not used[-Wunused - variable]
      ../
    kernel /
    kernel.c : 142 : 14
  : warning : ‘h’ defined but not used[-Wunused - variable] 142 |
  static int h;
|              ^
ld ../kernel/acpi.o ../kernel/spinlock.o ../kernel/panic.o ../kernel/time.o ../kernel/apic.o ../kernel/string.o ../kernel/gdt.o ../kernel/interrupt.o ../kernel/kbd.o ../kernel/io.o ../kernel/pmm.o ../kernel/idt.o ../kernel/vmm.o ../kernel/proc.o ../kernel/pic.o ../kernel/cpu.o ../kernel/kernel.o ../kernel/slab.o ../main.o ../fs/ramfs/ramfs_subr.o ../fs/ramfs/ramfs.o ../fs/ramfs/initramfs.o ../fs/vfs.o  ./switch.o ./isr.o -Map kernel.map -nostdlib -static -z max-page-size=0x1000 -T linker.ld -o kernel.elf
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ readelf -l exe

Elf file type is EXEC (Executable file)
Entry point 0x401000
There are 7 program headers, starting at offset 64

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x000000000000020c 0x000000000000020c  R      0x1000
  LOAD           0x0000000000001000 0x0000000000401000 0x0000000000401000
                 0x000000000000001f 0x000000000000001f  R E    0x1000
  LOAD           0x0000000000002000 0x0000000000402000 0x0000000000402000
                 0x0000000000000038 0x0000000000000038  R      0x1000
  NOTE           0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  NOTE           0x00000000000001e8 0x00000000004001e8 0x00000000004001e8
                 0x0000000000000024 0x0000000000000024  R      0x4
  GNU_PROPERTY   0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     0x10

 Section to Segment mapping:
  Segment Sections...
   00     .note.gnu.property .note.gnu.build-id 
   01     .text 
   02     .eh_frame 
   03     .note.gnu.property 
   04     .note.gnu.build-id 
   05     .note.gnu.property 
   06     
kyopa@kyopa-VirtualBox:~/franklin$ readelf -h exe
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x401000
  Start of program headers:          64 (bytes into file)
  Start of section headers:          8688 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         7
  Size of section headers:           64 (bytes)
  Number of section headers:         9
  Section header string table index: 8
kyopa@kyopa-VirtualBox:~/franklin$ make kernel 
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
cc  -O0 -g -Wall -Wextra -Wpedantic -Wconversion -pipe -I ../include  -std=c11 -ffreestanding -fno-stack-protector -fno-stack-check -fno-lto -fno-pie -fno-pic -m64 -march=x86-64 -mabi=sysv -mno-80387 -mno-mmx -mno-sse -mno-sse2 -mno-red-zone -mcmodel=kernel -MMD  -c ../kernel/proc.c -o ../kernel/proc.o
In file included from ../include/franklin/proc.h:4,
                 from ../kernel/proc.c:1:
../include/franklin/mmu.h:71:2: warning: ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 71 |
}
;
|
  ^In file included from../ kernel / proc.c : 1 :../ include / franklin /
    proc.h : 10 : 6
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 10 |
  enum procstate;
|
  ^~~~~~~~~../ include / franklin /
    proc.h : 20 : 14
  : warning : ISO C forbids forward references to ‘enum’ types[-Wpedantic] 20 |
  getproc(enum procstate, uint8_t*);
| ^~~~~~~~~In file included from../ include / asm / x86.h : 4,
  from../ kernel / proc.c : 2 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
| ^In file included from../ kernel / proc.c : 3 :../ include /
    d.h : 3 : 1 : warning : ISO C does not allow extra ‘;
’ outside of a function[-Wpedantic] 3 | ;
|
  ^../ kernel / proc.c : In function ‘acq’:../ kernel /
    proc.c : 34 : 3
  : warning
  : implicit declaration of
      function ‘acquire’ [-Wimplicit - function - declaration] 34 |
  acquire(&ptable.lock);
|
  ^~~~~~~../ kernel / proc.c : In function ‘r’:../ kernel /
    proc.c : 40 : 3
  : warning
  : implicit declaration of
      function ‘release’ [-Wimplicit - function - declaration] 40 |
  release(&ptable.lock);
|   ^~~~~~~
../kernel/proc.c: In function ‘get_current_proc’:
../kernel/proc.c:53:10: warning: returning ‘uint64_t’ {aka ‘long unsigned int’} from a function with return type ‘struct proc *’ makes pointer from integer without a cast [-Wint-conversion]
   53 |   return rdmsr(MSR_GS);
|
  ^~~~~~~~~~~~~../ kernel / proc.c : In function ‘exec’:../ kernel /
    proc.c : 68 : 3
  : warning
  : implicit declaration of
      function ‘vfs_open’ [-Wimplicit - function - declaration] 68 |
  vfs_open(name, &vn, 0, 0);
|
  ^~~~~~~~../ kernel /
    proc.c : 69 : 11
  : warning
  : implicit declaration of
      function ‘vfs_read’ [-Wimplicit - function - declaration] 69 |
  count = vfs_read(vn, &elf, 0, sizeof elf);
|           ^~~~~~~~
../kernel/proc.c:69:11: warning: conversion to ‘size_t’ {aka ‘long unsigned int’} from ‘int’ may change the sign of the result [-Wsign-conversion]
../kernel/proc.c:67:10: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
   67 |   size_t count;
|
  ^~~~~../ kernel /
    proc.c : 65 : 15
  : warning
  : variable ‘phdr’ set but not used[-Wunused - but - set - variable] 65 |
  Elf64_Phdr* phdr;
| ^~~~../ kernel / proc.c : In function ‘allocproc’:../ kernel /
    proc.c : 100 : 12 : warning : ‘return’ with a value
  , in function returning void[-Wreturn - type] 100 | return 0;
|            ^
../kernel/proc.c:89:1: note: declared here
   89 | allocproc(void (*entry)())
      | ^~~~~~~~~
../kernel/proc.c:108:5: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  108 |   a = stack;
|     ^
../kernel/proc.c:123:16: warning: assignment to ‘uint64_t’ {aka ‘long unsigned int’} from ‘uint8_t *’ {aka ‘unsigned char *’} makes integer from pointer without a cast [-Wint-conversion]
  123 |   p->regs->rsp = stack;
|
  ^../ kernel /
    proc.c : 105 : 12
  : warning
  : variable ‘a’ set but not used[-Wunused - but - set - variable] 105 |
  uint64_t a;
|
  ^At top level :../ kernel /
    proc.c : 10 : 21
  : warning : ‘curproc’ defined but not used[-Wunused - variable] 10 |
  static struct proc* curproc;
      |                     ^~~~~~~
ld ../kernel/acpi.o ../kernel/spinlock.o ../kernel/panic.o ../kernel/time.o ../kernel/apic.o ../kernel/string.o ../kernel/gdt.o ../kernel/interrupt.o ../kernel/kbd.o ../kernel/io.o ../kernel/pmm.o ../kernel/idt.o ../kernel/vmm.o ../kernel/proc.o ../kernel/pic.o ../kernel/cpu.o ../kernel/kernel.o ../kernel/slab.o ../main.o ../fs/ramfs/ramfs_subr.o ../fs/ramfs/ramfs.o ../fs/ramfs/initramfs.o ../fs/vfs.o  ./switch.o ./isr.o -Map kernel.map -nostdlib -static -z max-page-size=0x1000 -T linker.ld -o kernel.elf
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
kyopa@kyopa-VirtualBox:~/franklin$ make gdsb
make: *** No rule to make target 'gdsb'.  Stop.
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ gcc -static -nostdlib -e main -o exe main.c
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ tar -tf f.tar
haha
nice
main.c
exe
kyopa@kyopa-VirtualBox:~/franklin$ readelf -h exe
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x401000
  Start of program headers:          64 (bytes into file)
  Start of section headers:          8688 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         7
  Size of section headers:           64 (bytes)
  Number of section headers:         9
  Section header string table index: 8
kyopa@kyopa-VirtualBox:~/franklin$ 
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ gcc -static -nostdlib -e main -o exe main.c
kyopa@kyopa-VirtualBox:~/franklin$ gcc -static -nostdlib -fno-pie -e main -o exe main.c
kyopa@kyopa-VirtualBox:~/franklin$ make gdb
make -C kernel
make[1]: Entering directory '/home/kyopa/franklin/kernel'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/home/kyopa/franklin/kernel'
rm -rf iso_root
mkdir -p iso_root
cp f.tar iso_root
cp kernel/kernel.elf \
	limine.cfg limine/limine.sys limine/limine-cd.bin limine/limine-cd-efi.bin iso_root/
xorriso -as mkisofs -b limine-cd.bin \
	-no-emul-boot -boot-load-size 4 -boot-info-table \
	--efi-boot limine-cd-efi.bin \
	-efi-boot-part --efi-boot-image --protective-msdos-label \
	iso_root -o barebones.iso
xorriso 1.5.2 : RockRidge filesystem manipulator, libburnia project.

Drive current: -outdev 'stdio:barebones.iso'
Media current: stdio file, overwriteable
Media status : is blank
Media summary: 0 sessions, 0 data blocks, 0 data, 42.2g free
Added to ISO image: directory '/'='/home/kyopa/franklin/iso_root'
xorriso : UPDATE :       6 files added in 1 seconds
xorriso : UPDATE :       6 files added in 1 seconds
ISO image produced: 1082 sectors
Written to medium : 1082 sectors at LBA 0
Writing to 'stdio:barebones.iso' completed successfully.

limine/limine-deploy barebones.iso
Physical block size of 512 bytes.
Deploying to GPT. Logical block size of 512 bytes.
Secondary header at LBA 0x10e7.
Secondary header valid.
GPT partition NOT specified. Attempting GPT embedding.
New maximum count of partition entries: 32.
Stage 2 to be located at 0x1400 and 0x216200.
Reminder: Remember to copy the limine.sys file in either
          the root or /boot directories of one of the partitions
          on the device, or boot will fail!
Limine deployed successfully!
rm -rf iso_root
qemu-system-x86_64 -s -S -M q35 -m 2G -cdrom barebones.iso -boot d
  C-c C-cqemu-system-x86_64: terminating on signal 2

kyopa@kyopa-VirtualBox:~/franklin$   C-c C-c
kyopa@kyopa-VirtualBox:~/franklin$ readelf -l exe

Elf file type is EXEC (Executable file)
Entry point 0x401000
There are 7 program headers, starting at offset 64

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x000000000000020c 0x000000000000020c  R      0x1000
  LOAD           0x0000000000001000 0x0000000000401000 0x0000000000401000
                 0x000000000000001f 0x000000000000001f  R E    0x1000
  LOAD           0x0000000000002000 0x0000000000402000 0x0000000000402000
                 0x0000000000000038 0x0000000000000038  R      0x1000
  NOTE           0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  NOTE           0x00000000000001e8 0x00000000004001e8 0x00000000004001e8
                 0x0000000000000024 0x0000000000000024  R      0x4
  GNU_PROPERTY   0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     0x10

 Section to Segment mapping:
  Segment Sections...
   00     .note.gnu.property .note.gnu.build-id 
   01     .text 
   02     .eh_frame 
   03     .note.gnu.property 
   04     .note.gnu.build-id 
   05     .note.gnu.property 
   06     
kyopa@kyopa-VirtualBox:~/franklin$ readelf -e exe
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x401000
  Start of program headers:          64 (bytes into file)
  Start of section headers:          8688 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         7
  Size of section headers:           64 (bytes)
  Number of section headers:         9
  Section header string table index: 8

Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .note.gnu.propert NOTE             00000000004001c8  000001c8
       0000000000000020  0000000000000000   A       0     0     8
  [ 2] .note.gnu.build-i NOTE             00000000004001e8  000001e8
       0000000000000024  0000000000000000   A       0     0     4
  [ 3] .text             PROGBITS         0000000000401000  00001000
       000000000000001f  0000000000000000  AX       0     0     1
  [ 4] .eh_frame         PROGBITS         0000000000402000  00002000
       0000000000000038  0000000000000000   A       0     0     8
  [ 5] .comment          PROGBITS         0000000000000000  00002038
       000000000000002b  0000000000000001  MS       0     0     1
  [ 6] .symtab           SYMTAB           0000000000000000  00002068
       0000000000000108  0000000000000018           7     7     8
  [ 7] .strtab           STRTAB           0000000000000000  00002170
       0000000000000025  0000000000000000           0     0     1
  [ 8] .shstrtab         STRTAB           0000000000000000  00002195
       000000000000005a  0000000000000000           0     0     1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
  L (link order), O (extra OS processing required), G (group), T (TLS),
  C (compressed), x (unknown), o (OS specific), E (exclude),
  l (large), p (processor specific)

Program Headers:
  Type           Offset             VirtAddr           PhysAddr
                 FileSiz            MemSiz              Flags  Align
  LOAD           0x0000000000000000 0x0000000000400000 0x0000000000400000
                 0x000000000000020c 0x000000000000020c  R      0x1000
  LOAD           0x0000000000001000 0x0000000000401000 0x0000000000401000
                 0x000000000000001f 0x000000000000001f  R E    0x1000
  LOAD           0x0000000000002000 0x0000000000402000 0x0000000000402000
                 0x0000000000000038 0x0000000000000038  R      0x1000
  NOTE           0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  NOTE           0x00000000000001e8 0x00000000004001e8 0x00000000004001e8
                 0x0000000000000024 0x0000000000000024  R      0x4
  GNU_PROPERTY   0x00000000000001c8 0x00000000004001c8 0x00000000004001c8
                 0x0000000000000020 0x0000000000000020  R      0x8
  GNU_STACK      0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000  RW     0x10

 Section to Segment mapping:
  Segment Sections...
   00     .note.gnu.property .note.gnu.build-id 
   01     .text 
   02     .eh_frame 
   03     .note.gnu.property 
   04     .note.gnu.build-id 
   05     .note.gnu.property 
   06     
kyopa@kyopa-VirtualBox:~/franklin$ readelf -h exe
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x401000
  Start of program headers:          64 (bytes into file)
  Start of section headers:          8688 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         7
  Size of section headers:           64 (bytes)
  Number of section headers:         9
  Section header string table index: 8
kyopa@kyopa-VirtualBox:~/franklin$ objdump -d -Mintel exe

exe:     file format elf64-x86-64


Disassembly of section .text:

0000000000401000 <main>:
  401000:	f3 0f 1e fa          	endbr64 
  401004:	55                   	push   rbp
  401005:	48 89 e5             	mov    rbp,rsp
  401008:	c7 45 fc 0a 00 00 00 	mov    DWORD PTR [rbp-0x4],0xa
  40100f:	8b 45 fc             	mov    eax,DWORD PTR [rbp-0x4]
  401012:	83 c0 45             	add    eax,0x45
  401015:	89 45 f8             	mov    DWORD PTR [rbp-0x8],eax
  401018:	b8 00 00 00 00       	mov    eax,0x0
  40101d:	5d                   	pop    rbp
  40101e:	c3                   	ret    
kyopa@kyopa-VirtualBox:~/franklin$ gcc -static -nostdlib -fpie -e main -o exe main.c